<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üéÅ –ü–æ–¥–∞—Ä–∫–∏ –æ—Ç –î–µ–¥–∞ –ú–æ—Ä–æ–∑–∞</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: url('fon.jpg') no-repeat center center fixed;
            background-size: cover;
            min-height: 100vh;
            font-family: 'Arial', sans-serif;
            overflow-x: hidden;
            padding: 20px;
            position: relative;
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(49, 26, 12, 0.7);
            z-index: -1;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            text-align: center;
        }

        .header {
            color: #fff;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 0 0 20px #d59161;
            cursor: pointer;
            transition: all 0.3s ease;
            user-select: none;
        }

        .header h1:hover {
            transform: scale(1.02);
        }

        .header p {
            font-size: 1.2em;
            opacity: 0.9;
            margin-bottom: 15px;
        }

        .telegram-notice {
            background: rgba(124, 178, 176, 0.3);
            padding: 15px;
            border-radius: 15px;
            border: 2px solid #7cb2b0;
            margin: 20px auto;
            max-width: 500px;
            color: #d59161;
            font-size: 1.1em;
        }

        .auth-container {
            background: rgba(213, 145, 97, 0.3);
            padding: 20px;
            border-radius: 15px;
            border: 2px solid #d59161;
            margin: 20px auto;
            max-width: 400px;
            text-align: center;
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .auth-input {
            padding: 12px;
            border-radius: 8px;
            border: 2px solid #d59161;
            background: rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 1em;
        }

        .auth-input::placeholder {
            color: #d59161;
        }

        .auth-btn {
            background: linear-gradient(45deg, #d59161, #c81d28);
            color: white;
            border: none;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .auth-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px #d59161;
        }

        .user-info {
            background: rgba(213, 145, 97, 0.3);
            padding: 15px;
            border-radius: 15px;
            border: 2px solid #d59161;
            margin: 20px auto;
            max-width: 400px;
            color: white;
        }

        .logout-btn {
            background: linear-gradient(45deg, #c81d28, #954227);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            margin-top: 10px;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 10px #c81d28;
        }

        .timer-container {
            background: rgba(213, 145, 97, 0.3);
            padding: 15px;
            border-radius: 15px;
            border: 2px solid #d59161;
            margin: 20px auto;
            max-width: 400px;
        }

        .timer {
            font-size: 1.3em;
            color: #d59161;
            font-weight: bold;
        }

        .timer-label {
            font-size: 0.9em;
            opacity: 0.8;
            margin-bottom: 5px;
        }

        .gifts-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            padding: 20px;
            min-height: 400px;
        }

        .gift {
            width: 120px;
            height: 120px;
            background: linear-gradient(45deg, rgba(200, 29, 40, 0.4), rgba(149, 66, 39, 0.4));
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            box-shadow: 0 8px 25px rgba(200, 29, 40, 0.15);
            margin: 0 auto;
            backdrop-filter: blur(8px);
            border: 1px solid rgba(255, 255, 255, 0.15);
        }

        .gift.available:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 12px 35px rgba(200, 29, 40, 0.25);
            background: linear-gradient(45deg, rgba(200, 29, 40, 0.6), rgba(149, 66, 39, 0.6));
        }

        .gift.locked {
            background: linear-gradient(45deg, rgba(70, 103, 84, 0.3), rgba(32, 81, 78, 0.3));
            cursor: not-allowed;
            opacity: 0.4;
        }

        .gift.locked::before {
            content: 'üîí';
            font-size: 2em;
        }

        .gift.available::before {
            content: '';
            width: 60px;
            height: 60px;
            background-image: url('christmas-gift.svg');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            filter: drop-shadow(1px 1px 3px rgba(0,0,0,0.15)) opacity(0.8);
            transition: filter 0.3s ease;
        }

        .gift.available:hover::before {
            filter: drop-shadow(2px 2px 6px rgba(0,0,0,0.3)) opacity(1);
        }

        .gift.opened {
            transform: scale(0);
            opacity: 0;
            pointer-events: none;
            transition: all 0.5s ease;
        }

        .gift-collected {
            position: relative;
            width: 120px;
            height: 120px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto;
        }

        .gift-collected .gift-svg {
            width: 80px;
            height: 80px;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            opacity: 0.8;
        }

        .gift-collected::after {
            content: '';
            position: absolute;
            bottom: -25px;
            left: 0;
            right: 0;
            width: 60px;
            height: 20px;
            margin: 0 auto;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal-content {
            background: linear-gradient(135deg, #311a0c, #662b15);
            padding: 30px;
            border-radius: 20px;
            border: 3px solid #d59161;
            max-width: 400px;
            width: 90%;
            text-align: center;
            color: white;
            box-shadow: 0 0 50px #d59161;
        }

        .modal h2 {
            color: #d59161;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .modal p {
            margin-bottom: 15px;
            line-height: 1.6;
        }

        .prize-image {
            width: 120px;
            height: 120px;
            margin: 20px auto;
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
            filter: drop-shadow(0 0 10px rgba(213, 145, 97, 0.5));
        }

        .close-btn {
            background: linear-gradient(45deg, #d59161, #c81d28);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 1.1em;
            margin-top: 20px;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px #d59161;
        }

        .counter {
            color: #d59161;
            font-size: 1.1em;
            margin-top: 20px;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        .stat-item {
            background: rgba(213, 145, 97, 0.2);
            padding: 10px 20px;
            border-radius: 10px;
            border: 1px solid #d59161;
        }

        .collection-progress {
            margin-top: 20px;
            color: #d59161;
        }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: rgba(213, 145, 97, 0.2);
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(45deg, #d59161, #c81d28);
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        .dev-tooltip {
            position: fixed;
            top: 10px;
            left: 10px;
            background: rgba(255, 255, 255, 0.1);
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 0.8em;
            color: #d59161;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        @media (max-width: 768px) {
            .gifts-container {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
                gap: 15px;
            }
            
            .gift, .gift-collected {
                width: 100px;
                height: 100px;
            }
            
            .gift-collected .gift-svg {
                width: 60px;
                height: 60px;
            }
            
            .prize-image {
                width: 80px;
                height: 80px;
            }
            
            .header h1 {
                font-size: 2em;
            }
            
            .stats {
                gap: 15px;
            }
            
            .stat-item {
                padding: 8px 15px;
                font-size: 0.9em;
            }
        }
    </style>
</head>
<body>
    <div class="dev-tooltip" id="devTooltip"></div>
    
    <div class="container">
        <div class="auth-container" id="authContainer" style="display: none;">
            <h3>–í—Ö–æ–¥ –≤ –º–∞—Å—Ç–µ—Ä—Å–∫—É—é</h3>
            <div class="auth-form" id="loginForm">
                <input type="text" class="auth-input" id="loginUsername" placeholder="–õ–æ–≥–∏–Ω" required>
                <input type="password" class="auth-input" id="loginPassword" placeholder="–ü–∞—Ä–æ–ª—å" required>
                <button class="auth-btn" onclick="login()">–í–æ–π—Ç–∏</button>
            </div>
        </div>

        <div class="user-info" id="userInfo" style="display: none;">
            <h3>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å, <span id="userDisplayName">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</span>! üéÖ</h3>
            <p>–í–∞—à –ø—Ä–æ–≥—Ä–µ—Å—Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω –≤ –æ–±–ª–∞–∫–µ</p>
            <button class="logout-btn" onclick="logout()">–í—ã–π—Ç–∏</button>
        </div>

        <div class="header" id="mainContent" style="display: none;">
            <h1 id="mainTitle"> –ü–æ–¥–∞—Ä–æ—á–Ω–∞—è –º–∞—Å—Ç–µ—Ä—Å–∫–∞—è –î–µ–¥–∞ –ú–æ—Ä–æ–∑–∞</h1>
            <p>–°–æ–±–∏—Ä–∞–π –ø–æ–¥–∞—Ä–∫–∏ - –∫–∞–∂–¥—ã–π –º–æ–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ä–∞–∑.</p>
            
            <div class="telegram-notice">
                üí´ –ö–æ–º–∞–Ω–¥–∞ –¥–µ–¥—É—à–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç
                –æ—Ç–∫—Ä—ã–≤–∞—Ç—å –≤ —Å–ª—É—á–∞–π–Ω–æ–º –ø–æ—Ä—è–¥–∫–µ!
            </div>
            
            <div class="timer-container">
                <div class="timer-label">–î–æ —Å–ª–µ–¥—É—é—â–µ–≥–æ –ø–æ–¥–∞—Ä–∫–∞ –æ—Å—Ç–∞–ª–æ—Å—å:</div>
                <div class="timer" id="nextGiftTimer">00:00:00</div>
            </div>

            <div class="stats">
                <div class="stat-item">
                    üì¶ –í—Å–µ–≥–æ –ø–æ–¥–∞—Ä–∫–æ–≤: <strong>30</strong>
                </div>
                <div class="stat-item">
                    üéÅ –û—Ç–∫—Ä—ã—Ç–æ —Å–µ–≥–æ–¥–Ω—è: <strong id="openedToday">0</strong>
                </div>
                <div class="stat-item">
                    üìÖ –í—Å–µ–≥–æ —Å–æ–±—Ä–∞–Ω–æ: <strong id="totalOpened">0</strong>/30
                </div>
            </div>

            <div class="collection-progress">
                <div>–ü—Ä–æ–≥—Ä–µ—Å—Å –∫–æ–ª–ª–µ–∫—Ü–∏–∏:</div>
                <div class="progress-bar">
                    <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                </div>
                <div id="progressText">0% —Å–æ–±—Ä–∞–Ω–æ</div>
            </div>
        </div>

        <div class="gifts-container" id="giftsContainer" style="display: none;">
        </div>
    </div>

    <div class="modal" id="prizeModal">
        <div class="modal-content">
            <div class="prize-image" id="prizeImage"></div>
            <h2 id="prizeTitle">–ù–æ–≤—ã–π –ø–æ–¥–∞—Ä–æ–∫!</h2>
            <div id="prizeDescription"></div>
            <button class="close-btn" onclick="closeModal()">–ü–æ–Ω—è—Ç–Ω–æ!</button>
        </div>
    </div>

    <script>
        // –°–ø–∏—Å–æ–∫ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
        const ALLOWED_USERS = {
            'test3': 'test3',
            'test4': 'test4',
            'test5': 'test5',
            'lesha': 'iris',
            'polina': 'dior'
        };

        const CURRENT_USER_KEY = 'santa_current_user';

        const gifts = [
            { id: 1, emoji: "üç´", title: "–®–æ–∫–æ–ª–∞–¥–∫–∞", description: "–î–∞ –Ω—É??? –°–µ—Ä—å–µ–∑–Ω–æ? –û—Ö—Ä–µ–Ω–µ—Ç—å!" },
            { id: 2, emoji: "üç≠", title: "–ù–∞–±–æ—Ä –ª–µ–¥–µ–Ω—Ü–æ–≤", description: "–ö–∞–∫ —à—É—Ç—è—Ç –º–∏–ª–ª–µ–Ω–∏–∞–ª—ã, –∫–∞–∫–æ–π –≥–æ–¥ - —Ç–∞–∫–æ–π –∏ –ø–æ–¥–∞—Ä–æ–∫..." },
            { id: 3, emoji: "üç™", title: "–ü—Ä—è–Ω–∏—á–Ω—ã–π —á–µ–ª–æ–≤–µ—á–µ–∫", description: "–û –Ω–µ—Ç, —Ç–µ–ø–µ—Ä—å —Ç—ã –∫–∞–Ω–Ω–∏–±–∞–ª!" },
            { id: 4, emoji: "üç∑", title: "–ù–∞–±–æ—Ä –¥–ª—è –≥–ª–∏–Ω—Ç–≤–µ–π–Ω–∞", description: "–í–∞—Ä–∏ –Ω–∞ —Å–æ–∫–µ, –Ω–µ –Ω–∞–≥–ª–µ–π" },
            { id: 5, emoji: "üçµ", title: "–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π —á–∞–π", description: "–ü–æ–ø–µ–π —á–∞–π–æ–∫, –≥–æ–¥ –Ω–∏–∫—É–¥–∞ –Ω–µ —É–±–µ–∂–∏—Ç" },
            { id: 6, emoji: "üçä", title: "–ú–∞–Ω–¥–∞—Ä–∏–Ω—ã –æ—Ç –æ–ª–µ–Ω–µ–π", description: "–î–ê–ï–®–¨ –î–ò–ê–¢–ï–ó!!! –î–ê–ï–®–¨ –û–ë–û–ñ–†–ê–¢–¨–°–Ø –ú–ê–ù–î–ê–†–ò–ù–û–í!!! –ù–∞–ø–∏—à–∏ –¥–µ–¥—É—à–∫–µ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞." },
            { id: 7, emoji: "ü•®", title: "–ü–µ—á–µ–Ω—å–µ –æ—Ç –°–Ω–µ–≥—É—Ä–æ—á–∫–∏", description: "–ü–µ–∫–ª–∞ –Ω–µ —Å–∞–º–∞, –∫–æ–Ω–µ—á–Ω–æ, –æ–Ω–∞ –Ω–µ –¥–ª—è –∫—É—Ö–Ω–∏, –∞ –¥–ª—è –∫—Ä–∞—Å–æ—Ç—ã" },
            { id: 8, emoji: "üçØ", title: "–ú–µ–¥-–º–∏–Ω–∏", description: "–ò–¥—É –ø–æ –ª–µ—Å—É, –≤–∏–∂—É, –º–µ–¥–≤–µ–¥—å –º–µ–¥ –∂—Ä–µ—Ç, –æ—Ç–æ–±—Ä–∞–ª —É –Ω–µ–≥–æ, –¥–∞—Ä—é —Ç–µ–±–µ" },
            { id: 9, emoji: "üç¨", title: "–ö–æ–Ω—Ñ–µ—Ç–∫–∏", description: "–ë–µ–∑ —è–¥–∞, —á–µ—Å—Ç–Ω–æ, –≤–∫—É—Å–Ω—ã–µ, —ç—Ç–æ —É–∂–µ –Ω–µ –æ—á–µ–Ω—å —á–µ—Å—Ç–Ω–æ" },
            { id: 10, emoji: "‚òÅÔ∏è", title: "–ú–∞—Ä—à–º–µ–ª–ª–æ—É", description: "–ß—Ç–æ–±—ã —Å–ª–∏–ø–∞–ª–æ—Å—å –±–æ–¥—Ä–µ–µ –∏ –±—ã—Å—Ç—Ä–µ–µ!" },
            { id: 11, emoji: "üî∂", title: "–ú–∏–Ω–∏-—à–æ–∫–æ–ª–∞–¥", description: "–ë–æ–ª—å—à—É—é –µ—â–µ —Ö–æ—Ä–æ—à–∏–º –ø–æ–≤–µ–¥–µ–Ω–∏–µ–º –∑–∞—Å–ª—É–∂–∏—Ç—å –Ω–∞–¥–æ, –∞ —Ç—ã –∫–∞–∫ —Å–µ–±—è –≤–µ–¥–µ—à—å?" },
            { id: 12, emoji: "üéÑ", title: "–ü—Ä—è–Ω–∏–∫–∏", description: "–ú–æ–∂–µ—Ç —Å–ª–∏–ø–Ω–µ—Ç—Å—è. –ú–æ–∂–µ—Ç –Ω–µ—Ç. " },
            { id: 13, emoji: "üå≤", title: "–í–∞—Ä–µ–Ω—å–µ –∏–∑ –µ–ª–æ–≤—ã—Ö —à–∏—à–µ–∫", description: "–õ–∏—á–Ω–æ —Å–æ –∑–≤–µ—Ä—å–µ–º –≤ –ª–µ—Å—É –¥—Ä–∞–ª—Å—è –∑–∞ —ç—Ç–∏ —à–∏—à–∫–∏, –∑—É–± –¥–∞—é! –ü–æ—Ç–µ—Ä—è–Ω–Ω—ã–π –≤ –±–æ—é." },
            { id: 14, emoji: "‚òï", title: "–ì–æ—Ä—è—á–∏–π —à–æ–∫–∞–ª–∞–¥", description: "–ù–æ –Ω–µ –≥–æ—Ä—è—á–µ–µ —Ç–µ–±—è üòè" },
            { id: 15, emoji: "üßÅ", title: "–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –∫–µ–∫—Å", description: "–ù–∞–¥–µ—é—Å—å, —É —Ç–µ–±—è –Ω–µ—Ç –∞–ª–ª–µ—Ä–≥–∏–∏ –Ω–∞ —á—Ç–æ-–Ω–∏–±—É–¥—å" },
            { id: 16, emoji: "üéÄ", title: "–Å–ª–æ—á–Ω–∞—è –∏–≥—Ä—É—à–∫–∞ —Å —Ç–≤–æ–∏–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º", description: "–¢–∞–∫ —É–∂ –∏ –±—ã—Ç—å, –ø–æ–≤–µ—Å–∏—à—å –Ω–∞ –µ–ª–∫—É —Ç–æ, —á—Ç–æ —Ç–µ–±–µ –Ω—Ä–∞–≤–∏—Ç—Å—è! –ö–∞—Ä—Ç–∏–Ω–∫—É —à–ª–∏ –≤ —Å–æ–æ–±—â–µ–Ω–∏—è –∫–∞–Ω–∞–ª–∞ –¥–µ–¥—É—à–∫–∏" },
            { id: 17, emoji: "üß¶", title: "–ù–æ–≤–æ–≥–æ–¥–Ω–∏–π –Ω–æ—Å–æ–∫ —Å –ø–æ–¥–∞—Ä–∫–∞–º–∏", description: "–ü–æ–¥–∞—Ä–∫–∏ –Ω–∞ —É—Å–º–æ—Ç—Ä–µ–Ω–∏–µ –î–µ–¥–∞. –í–æ–∑–º–æ–∂–Ω–æ, –Ω–µ —É–≥–ª–∏." },
            { id: 18, emoji: "‚úÇÔ∏è", title: "–ù–∞–±–æ—Ä –¥–ª—è –ø–æ–¥–µ–ª–æ–∫", description: "–°–¥–µ–ª–∞–π —á—Ç–æ-–Ω–∏–±—É–¥—å –ø–æ–ª–µ–∑–Ω–æ–µ —Ä—É–∫–∞–º–∏ –≤ —ç—Ç–æ–º –≥–æ–¥—É" },
            { id: 19, emoji: "ü¶å", title: "–ë—Ä–µ–ª–æ–∫-–æ–ª–µ–Ω—å", description: "–ï—Å–ª–∏ –ø–æ—Ç–µ—Ä—è–µ—à—å - –æ–±—Ä–∞—Ç–Ω–æ –Ω–µ –ø—Ä–∏—Å–∫–æ—á–µ—Ç, —ç—Ç–æ —Ç–µ–±–µ –Ω–µ –≥–æ–ª—É–±—å" },
            { id: 20, emoji: "üïØÔ∏è", title: "–°–≤–µ—á–∞ —Å –∑–∞–ø–∞—Ö–æ–º –ø—Ä–∞–∑–¥–Ω–∏–∫–∞", description: "–ó–∞–∫–æ—à–º–∞—Ä—å –≤—Å–µ—Ö —Å–≤–æ–∏–º –Ω–æ–≤–æ–≥–æ–¥–Ω–∏–º –≤–∞–π–±–æ–º" },
            { id: 21, emoji: "üì±", title: "–°—Ç–∏–∫–µ—Ä–ø–∞–∫", description: "–¢–æ–ª—å–∫–æ –Ω–µ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–π –µ–≥–æ –Ω–∞ –ø–æ—Ç–æ–º!!!" },
            { id: 22, emoji: "üò¥", title: "–ú–∞—Å–∫–∞ –¥–ª—è —Å–Ω–∞", description: "–í—ã—Å—ã–ø–∞–π—Å—è, —Ç–µ–±—è –∂–¥–µ—Ç —Å–ª–µ–¥—É—é—â–∏–π –≥–æ–¥" },
            { id: 23, emoji: "üå≤", title: "–ú–∏–Ω–∏-—ë–ª–∫–∞", description: "–î–µ–º–æ-–≤–µ—Ä—Å–∏—è –Ω–∞—Å—Ç–æ—è—â–µ–π" },
            { id: 24, emoji: "üìì", title: "–ë–ª–æ–∫–Ω–æ—Ç –¥–ª—è –∂–µ–ª–∞–Ω–∏–π", description: "–ß—Ç–æ–±—ã –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –≥–æ–¥—É –î–µ–¥ –ø—Ä–æ–¥–∞–ª –ø–æ—á–∫—É –æ—Ç —Ç–≤–æ–∏—Ö –∑–∞–ø—Ä–æ—Å–æ–≤" },
            { id: 25, emoji: "üß¶", title: "–¢—ë–ø–ª—ã–µ –Ω–æ—Å–∫–∏", description: "–ë–æ–ª–µ—Ç—å –≤—Ä–µ–¥–Ω–æ, –Ω–µ –±–æ–ª–µ—Ç—å –ø–æ–ª–µ–∑–Ω–æ" },
            { id: 26, emoji: "üíÑ", title: "–ë–∞–ª—å–∑–∞–º –¥–ª—è –≥—É–±", description: "–ù–µ –¥—É–º–∞—é, —á—Ç–æ —Ç–µ–±–µ –Ω—Ä–∞–≤–∏—Ç—Å—è –º–æ—Ä–æ–∑–Ω—ã–π –ø–æ—Ü–µ–ª—É–π üòà" },
            { id: 27, emoji: "üß©", title: "–î–µ—Ä–µ–≤—è–Ω–Ω–∞—è –∏–≥—Ä—É—à–∫–∞", description: "–í–∞—É, –¥–∞–∂–µ –Ω–µ –ø—Ä–∏–±–∏—Ç–∞—è –∫ –ø–æ–ª—É!" },
            { id: 28, emoji: "‚òï", title: "–ö—Ä—É–∂–∫–∞", description: "–ù–µ—á–µ–≥–æ –≤ –ª–µ—Å—É —Ä—É–±–∏—Ç—å, –Ω–µ —Ç—ã —Å–∞–∂–∞–ª, –Ω–µ —Ç–µ–±–µ —Ä—É–±–∏—Ç—å, —Å–≤–æ—é —Ä–∞—Å—Ç–∏, —Å–∫–∞–∑–∞–ª –±—ã —è, –µ—Å–ª–∏ –±—ã —Ç—É—Ç –±—ã–ª –Ω–∞–±–æ—Ä –¥–ª—è –≤—ã—Ä–∞—â–∏–≤–∞–Ω–∏—è, –Ω–æ –°–Ω–µ–≥—É—Ä–æ—á–∫–∞ –∑–∞–ø—Ä–µ—Ç–∏–ª–∞, –ø–æ–º–µ–Ω—è–ª–∏ –Ω–∞ –∫—Ä—É–∂–∫—É" },
            { id: 29, emoji: "üå∏", title: "–ê—Ä–æ–º–∞—Ç –¥–ª—è –¥–æ–º–∞", description: "–ü–µ—Ä–µ–±—å–µ–º –∑–∞–ø–∞—Ö –ø—Ä–µ–¥–Ω–æ–≤–æ–≥–æ–¥–Ω–µ–π –∑–∞–µ–±–∞–Ω–Ω–æ—Å—Ç–∏!" },
            { id: 30, emoji: "üîÆ", title: "–°–Ω–µ–∂–Ω—ã–π —à–∞—Ä", description: " –ù–µ —Å –∫–∞–∫–∞—é—â–∏–º –∫–æ—Ç–∏–∫–æ–º" }
        ];

        function getUserStorageKey(username, key) {
            return `santa_${username}_${key}`;
        }

        let currentUser = null;
        let collectedGifts = [];
        let todayOpened = 0;
        let canOpenGift = true;
        let cooldownEndTime = 0;

        const authContainer = document.getElementById('authContainer');
        const userInfo = document.getElementById('userInfo');
        const mainContent = document.getElementById('mainContent');
        const giftsContainer = document.getElementById('giftsContainer');
        const nextGiftTimer = document.getElementById('nextGiftTimer');
        const openedToday = document.getElementById('openedToday');
        const totalOpenedElement = document.getElementById('totalOpened');
        const progressFill = document.getElementById('progressFill');
        const progressText = document.getElementById('progressText');
        const mainTitle = document.getElementById('mainTitle');
        const devTooltip = document.getElementById('devTooltip');
        const userDisplayName = document.getElementById('userDisplayName');
        const prizeImage = document.getElementById('prizeImage');

        function init() {
            checkAuth();
        }

        function checkAuth() {
            const savedUser = localStorage.getItem(CURRENT_USER_KEY);
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showUserInterface();
                loadUserProgress();
            } else {
                showAuthInterface();
            }
        }

        function showAuthInterface() {
            authContainer.style.display = 'block';
            userInfo.style.display = 'none';
            mainContent.style.display = 'none';
            giftsContainer.style.display = 'none';
        }

        function showUserInterface() {
            authContainer.style.display = 'none';
            userInfo.style.display = 'block';
            mainContent.style.display = 'block';
            giftsContainer.style.display = 'grid';
            
            userDisplayName.textContent = currentUser.username;
            updateProgressBar();
            startTimer();
            renderGifts();
            setupSecretFeature();
        }

        function login() {
            const username = document.getElementById('loginUsername').value.trim();
            const password = document.getElementById('loginPassword').value.trim();

            if (!username || !password) {
                alert('–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è!');
                return;
            }

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Å–ø–∏—Å–∫–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã—Ö
            if (!ALLOWED_USERS[username] || ALLOWED_USERS[username] !== password) {
                alert('–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å!');
                return;
            }

            currentUser = { username: username };
            localStorage.setItem(CURRENT_USER_KEY, JSON.stringify(currentUser));
            
            showUserInterface();
            loadUserProgress();
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem(CURRENT_USER_KEY);
            showAuthInterface();
        }

        function loadUserProgress() {
            if (!currentUser) return;

            const today = new Date().toDateString();
            const lastOpenedKey = getUserStorageKey(currentUser.username, 'last_opened');
            const collectedGiftsKey = getUserStorageKey(currentUser.username, 'collected_gifts');
            const todayOpenedKey = getUserStorageKey(currentUser.username, 'today_opened');
            const currentDayKey = getUserStorageKey(currentUser.username, 'current_day');
            
            const savedGifts = localStorage.getItem(collectedGiftsKey);
            collectedGifts = savedGifts ? JSON.parse(savedGifts) : [];
            
            const lastOpened = localStorage.getItem(lastOpenedKey);
            const savedDay = localStorage.getItem(currentDayKey);
            
            if (savedDay !== today) {
                todayOpened = 0;
                localStorage.setItem(currentDayKey, today);
                localStorage.setItem(todayOpenedKey, '0');
            } else {
                todayOpened = parseInt(localStorage.getItem(todayOpenedKey)) || 0;
            }
            
            if (lastOpened && lastOpened !== '0') {
                const lastOpenedTime = parseInt(lastOpened);
                const now = Date.now();
                const timeSinceLastOpen = now - lastOpenedTime;
                
                if (timeSinceLastOpen < 24 * 60 * 60 * 1000) {
                    canOpenGift = false;
                    cooldownEndTime = lastOpenedTime + (24 * 60 * 60 * 1000);
                }
            }
            
            updateUI();
        }

        function saveUserProgress() {
            if (!currentUser) return;

            const lastOpenedKey = getUserStorageKey(currentUser.username, 'last_opened');
            const collectedGiftsKey = getUserStorageKey(currentUser.username, 'collected_gifts');
            const todayOpenedKey = getUserStorageKey(currentUser.username, 'today_opened');
            const currentDayKey = getUserStorageKey(currentUser.username, 'current_day');

            localStorage.setItem(lastOpenedKey, Date.now().toString());
            localStorage.setItem(collectedGiftsKey, JSON.stringify(collectedGifts));
            localStorage.setItem(todayOpenedKey, todayOpened.toString());
            localStorage.setItem(currentDayKey, new Date().toDateString());
        }

        function updateUI() {
            openedToday.textContent = todayOpened;
            totalOpenedElement.textContent = collectedGifts.length;
        }

        function updateProgressBar() {
            const progress = (collectedGifts.length / gifts.length) * 100;
            progressFill.style.width = `${progress}%`;
            progressText.textContent = `${Math.round(progress)}% —Å–æ–±—Ä–∞–Ω–æ (${collectedGifts.length}/30)`;
        }

        function renderGifts() {
            giftsContainer.innerHTML = '';
            
            gifts.forEach(gift => {
                if (collectedGifts.includes(gift.id)) {
                    const collectedElement = document.createElement('div');
                    collectedElement.className = 'gift-collected';
                    collectedElement.title = gift.title;
                    
                    // –¢–æ–ª—å–∫–æ sobrano.svg –¥–ª—è —Å–æ–±—Ä–∞–Ω–Ω—ã—Ö –ø–æ–¥–∞—Ä–∫–æ–≤
                    const svgElement = document.createElement('div');
                    svgElement.className = 'gift-svg';
                    svgElement.style.backgroundImage = `url('sobrano.svg')`;
                    collectedElement.appendChild(svgElement);
                    
                    giftsContainer.appendChild(collectedElement);
                } else {
                    const giftElement = document.createElement('div');
                    giftElement.className = canOpenGift ? 'gift available' : 'gift locked';
                    giftElement.dataset.id = gift.id;
                    
                    if (window.innerWidth > 768) {
                        giftElement.style.transform = `rotate(${Math.random() * 20 - 10}deg)`;
                    }
                    
                    if (canOpenGift) {
                        giftElement.addEventListener('click', () => openGift(gift.id));
                    }
                    
                    giftsContainer.appendChild(giftElement);
                }
            });
        }

        function openGift(giftId) {
            if (!currentUser) {
                alert('–°–Ω–∞—á–∞–ª–∞ –≤–æ–π–¥–∏—Ç–µ –≤ —Å–∏—Å—Ç–µ–º—É!');
                return;
            }

            if (!canOpenGift) {
                showCooldownMessage();
                return;
            }
            
            if (todayOpened >= 1) {
                alert('–°–µ–≥–æ–¥–Ω—è —Ç—ã —É–∂–µ –æ—Ç–∫—Ä—ã–≤–∞–ª –ø–æ–¥–∞—Ä–æ–∫! –í–æ–∑–≤—Ä–∞—â–∞–π—Å—è –∑–∞–≤—Ç—Ä–∞ –∑–∞ –Ω–æ–≤—ã–º —Å—é—Ä–ø—Ä–∏–∑–æ–º! üéÖ');
                return;
            }

            if (collectedGifts.includes(giftId)) {
                alert('–≠—Ç–æ—Ç –ø–æ–¥–∞—Ä–æ–∫ —É–∂–µ —Å–æ–±—Ä–∞–Ω! –í—ã–±–µ—Ä–∏ –¥—Ä—É–≥–æ–π! üéÅ');
                return;
            }
            
            const gift = gifts.find(g => g.id === giftId);
            
            collectedGifts.push(giftId);
            todayOpened = 1;
            canOpenGift = false;
            cooldownEndTime = Date.now() + (24 * 60 * 60 * 1000);
            
            saveUserProgress();
            updateUI();
            updateProgressBar();
            
            const giftElement = document.querySelector(`.gift[data-id="${giftId}"]`);
            if (giftElement) {
                giftElement.classList.add('opened');
                setTimeout(() => {
                    renderGifts();
                }, 500);
            }
            
            showPrize(gift);
        }

        function showCooldownMessage() {
            const now = Date.now();
            const timeLeft = cooldownEndTime - now;
            
            if (timeLeft > 0) {
                const hours = Math.floor(timeLeft / (1000 * 60 * 60));
                const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                alert(`–°–ª–µ–¥—É—é—â–∏–π –ø–æ–¥–∞—Ä–æ–∫ –º–æ–∂–Ω–æ –±—É–¥–µ—Ç –æ—Ç–∫—Ä—ã—Ç—å —á–µ—Ä–µ–∑ ${hours}—á ${minutes}–º! üïê`);
            }
        }

        function showPrize(gift) {
            // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º SVG –∫–∞—Ä—Ç–∏–Ω–∫—É –≤–º–µ—Å—Ç–æ —ç–º–æ–¥–∑–∏
            prizeImage.style.backgroundImage = `url('advent${gift.id}.svg')`;
            document.getElementById('prizeTitle').textContent = gift.title;
            document.getElementById('prizeDescription').textContent = gift.description;
            
            document.getElementById('prizeModal').style.display = 'flex';
        }

        function closeModal() {
            document.getElementById('prizeModal').style.display = 'none';
        }

        function startTimer() {
            function updateTimer() {
                if (!canOpenGift) {
                    const now = Date.now();
                    const timeLeft = cooldownEndTime - now;
                    
                    if (timeLeft <= 0) {
                        canOpenGift = true;
                        todayOpened = 0;
                        renderGifts();
                        updateUI();
                        nextGiftTimer.textContent = '–ú–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å! üéÅ';
                    } else {
                        const hours = Math.floor(timeLeft / (1000 * 60 * 60));
                        const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
                        const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);
                        nextGiftTimer.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
                    }
                } else {
                    nextGiftTimer.textContent = '–ú–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å! üéÅ';
                }
            }
            
            setInterval(updateTimer, 1000);
            updateTimer();
        }

        let secretClickCount = 0;
        let secretClickTimeout = null;

        function setupSecretFeature() {
            mainTitle.addEventListener('click', handleSecretClick);
        }

        function handleSecretClick() {
            secretClickCount++;
            
            if (secretClickTimeout) {
                clearTimeout(secretClickTimeout);
            }
            
            secretClickTimeout = setTimeout(() => {
                secretClickCount = 0;
                devTooltip.style.opacity = '0';
            }, 3000);
            
            showDevTooltip(`–ù–∞–∂–∞—Ç–∏–π: ${secretClickCount}/5`);
            
            if (secretClickCount >= 5) {
                activateSecretFeature();
                secretClickCount = 0;
            }
        }

        function showDevTooltip(message) {
            devTooltip.textContent = message;
            devTooltip.style.opacity = '1';
        }

        function activateSecretFeature() {
            canOpenGift = true;
            todayOpened = 0;
            cooldownEndTime = Date.now();
            
            renderGifts();
            updateUI();
            
            showDevTooltip('üéÆ –†–µ–∂–∏–º —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω!');
            
            if (currentUser) {
                const lastOpenedKey = getUserStorageKey(currentUser.username, 'last_opened');
                const todayOpenedKey = getUserStorageKey(currentUser.username, 'today_opened');
                localStorage.setItem(lastOpenedKey, '0');
                localStorage.setItem(todayOpenedKey, '0');
            }
        }

        document.getElementById('prizeModal').addEventListener('click', function(event) {
            if (event.target === this) {
                closeModal();
            }
        });

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
